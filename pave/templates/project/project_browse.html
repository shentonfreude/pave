{% extends "base.html" %}

{% block title %} PAVE Projects List{% endblock %}

{% block content %}
<h1>PAVE Projects List</h1>

{% if limit %}
<p>Showing {{limit}} most recent Approved and Closed projects.</p>
{% endif %}

{% if approved %}
<h2>Approved ({{approved_num}})
  {% if limit %}
  <a class="btn btn-info"
     href="{% url approved %}">View All Approved</a>
  {% endif %}
</h2>

<table class="table">

  <thead>
    <tr>
      <th>Project ID</th>
      <th>Position Title</th>
      <th>Announcement Closing Date</th>
      <th>Brief Description</th>
      <th>Targeted Groups</th>
    </tr>
  </thead>

  <tbody>
    {% for project in approved %}
    <tr>
      <td><a href="{% url details object_id=project.id %}">{{project.project_number}}</a></td>
      <td>{{project.position_title}}</td>
      <td>{{project.announcement_closes|date:"m/d/Y"}}</td>
      <td>{{project.brief_description}}</td>
      <td> <!-- how can we remove the initial blank line in the cell -->
        <dl>
          <dt>Pay Plan:</dt> <dd>{{project.pay_plan}}</dd>
          <dt>Series:</dt>   <dd>{{project.series_codes.all|join:", "}}</dd>
          <dt>Grades:</dt>   <dd>{{project.grade_levels.all|join:", "}}</dd>
          <dt>Centers:</dt>  <dd>{{project.nasa_centers.all|join:", "}}</dd>
        </dl>
      </td>
    </tr>
    {% endfor %}

  </tbody>

</table>
{% endif %}

{% if closed %}
<h2>Closed ({{closed_num}})
  {% if limit %}
  <a class="btn btn-info"
     href="{% url closed %}">View All Closed</a>
  {% endif %}
</h2>

<table class="table">
  <thead>
    <tr>
      <th>Project ID</th>
      <th>Position Title</th>
      <th>Announcement Closing Date</th>
      <th>Brief Description</th>
      <th>Targeted Groups</th>
    </tr>
  </thead>
  <tbody>

    {% for project in closed %}
    <tr class="{% cycle 'odd' 'even' %}">
      <td><a href="{% url details object_id=project.id %}">{{project.project_number}}</a></td>
      <td>{{project.position_title}}</td>
      <td>{{project.announcement_closes|date:"m/d/Y"}}</td>
      <td>{{project.brief_description}}</td>
      <td>
        <dl> <!-- how can we remove the initial blank line in the cell -->
          <dt>Pay Plan:</dt> <dd>{{project.pay_plan}}</dd>
          <dt>Series:</dt>   <dd>{{project.series_codes.all|join:", "}}</dd>
          <dt>Grades:</dt>   <dd>{{project.grade_levels.all|join:", "}}</dd>
          <dt>Centers:</dt>  <dd>{{project.nasa_centers.all|join:", "}}</dd>
        </dl>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}

{% endblock %}
